language: node_js

services:
  - docker

before_deploy:
  - docker build -t hmarks/chucknorris .

deploy:
  provider: script
  script: bash docker_push
  provider: elasticbeanstalk
  access_key_id:
    secure: "$ACCESKEYID"
  secure_access_key:
    secure: "$SECRETACCESKEY"
  region: "us-east-1"
  app: "chucknorris_travis"
  env: "chucknorris_travis-dev"
  bucket_name: "chucknorris_bucket"
  on:
    branch: dev
