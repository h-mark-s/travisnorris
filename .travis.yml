language: node_js

services:
  - docker

before_deploy:
  - docker build -t hmarks/chucknorris .

deploy:
  provider: script
  script: bash docker_push

deploy:
  provider: elasticbeanstalk
  access_key_id:
    secure: "$ACCESKEYID"
  secret_access_key:
    secure: "$SECRETACCESKEY"
  region: "us-east-1"
  app: "travisnorris"
  env: "travisnorris-dev"
  on:
    branch: dev
