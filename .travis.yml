language: node_js

services:
  - docker

before_deploy:
  - docker build -t hmarks/chucknorris .

deploy:
  provider: script
  script: bash docker_push
  provider: elasticbeanstalk
  acces_key_id: "$ACCESKEYID"
  secure_acces_key:
    secure: "$SECRETACCESKEY"
  region: "us-east-1"
  app: "chucknorris_travis"
  env: "chucknorris_travis-dev"
  on:
    branch: dev
